function AJAXRequest(M){var N=[],F=this,P=AJAXRequest.__pool__||(AJAXRequest.__pool__=[]);(function(X){var U=function(){};X=X?X:{};var V=["url","content","method","async","encode","timeout","ontimeout","onrequeststart","onrequestend","oncomplete","onexception"];var W=["","","GET",true,H("UTF-8"),3600000,U,U,U,U,U];var T=V.length;while(T--){F[V[T]]=E(X[V[T]],W[T])}if(!G()){return false}})(M);function E(U,T){return U!=undefined?U:T}function G(){var W,T=[window.XMLHttpRequest,"MSXML2.XMLHTTP","Microsoft.XMLHTTP",];for(var U=0;U<P.length;U+=1){if(P[U].readyState==0||P[U].readyState==4){return P[U]}}for(var U=0;U<T.length;U+=1){try{if(getOs()=="Safari"){W=new T[0]}else{W=(T[U]&&typeof(T[U])=="function"?new T[U]:new ActiveXObject(T[U]))}break}catch(V){W=false;continue}}if(!W){throw"Cannot init XMLHttpRequest object!";return false}else{P[P.length]=W;return W}}function B(T){return document.getElementById(T)}function D(U){var T=U*1;return(isNaN(T)?0:T)}function R(T){return(typeof(T)=="string"?(T=B(T))?T:false:T)}function J(){return((new Date)*1)}function A(U,T){N[U+""]=T}function I(T){return(N[T+""])}function K(T,U,W){return(function V(Y){Y=T(Y);for(var Z=0,X=U.length;Z<X;Z+=1){Y=Y.replace(U[Z],W[Z])}return(Y)})}function H(T){if(T.toUpperCase()=="UTF-8"){return(encodeURIComponent)}else{return(K(escape,[/\+/g],["%2B"]))}}function Q(W,U){if(!W.nodeName){return}var T="|"+W.nodeName.toUpperCase()+"|";if("|INPUT|TEXTAREA|OPTION|".indexOf(T)>-1){W.value=U}else{try{W.innerHTML=U}catch(V){}}}function O(T){if(typeof(T)=="function"){return T}else{T=R(T);if(T){return(function(U){Q(T,U.responseText)})}else{return F.oncomplete}}}function C(U,W,X){var T=0,V=[];while(T<U.length){V[T]=U[T]?(X[T]?X[T](U[T]):U[T]):W[T];T+=1}while(T<W.length){V[T]=W[T];T+=1}return V}function S(){var V,U=false,a=G();var X=C(arguments,[F.url,F.content,F.oncomplete,F.method,F.async,null],[null,null,O,null,null,null]);var W=X[0],d=X[1],f=X[2],Y=X[3],b=X[4],e=X[5];var c=Y.toUpperCase()=="POST"?true:false;if(!W){throw"url is null";return false}var T={url:W,content:d,method:Y,params:e};if(!c){W+=(W.indexOf("?")>-1?"&":"?")+"timestamp="+J()+"&"+L(e)}a.open(Y,W,b);F.onrequeststart(T);if(c){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}a.setRequestHeader("X-Request-With","XMLHttpRequest");V=setTimeout(function(){U=true;a.abort()},F.timeout);var Z=function(){if(U){F.ontimeout(T);F.onrequestend(T)}else{if(a.readyState==4){clearTimeout(V);T.status=a.status;try{if(a.status==200){f(a,e)}else{F.onexception(T)}}catch(g){F.onexception(T)}F.onrequestend(T)}}};a.onreadystatechange=Z;if(c){d=L(e);a.send(d)}else{a.send("")}if(b==false){Z()}return true}this.setcharset=function(T){F.encode=H(T)};this.get=function(T,V,U){return S(T,"",V,"GET",F.async,U)};this.update=function(b,V,Z,T,a,W){Z=D(Z);T=D(T);if(typeof(W)=="undefined"){W="GET"}else{W=W.toUpperCase()}if(Z<1){T=1}else{if(T<1){T=Number.POSITIVE_INFINITY}}var Y=function(){S(V,"",b,W,F.async,a)};var X=J();var U=function(c){Y();c--;if(c>0){A(X,setTimeout(function(){U(c)},Z))}};U(T);return X};this.stopupdate=function(T){clearTimeout(I(T))};this.post=function(U,T,W,V){return S(U,T,W,"POST",F.async,V)};this.postf=function(b,g,f){var c=[],d,W,Z,Y,a,T=arguments.length,e=arguments;b=b?R(b):false;if(!b||b.nodeName!="FORM"){return false}validfoo=b.getAttribute("onvalidate");validfoo=validfoo?(typeof(validfoo)=="string"?new Function(validfoo):validfoo):null;if(validfoo&&!validfoo()){return false}var X=b.getAttribute("action"),U=b.getAttribute("method");var V=F.formToStr(b);if(V.length==0){return false}if(U.toUpperCase()=="POST"){return S(X,V,g,"POST",true,f)}else{X+=(X.indexOf("?")>-1?"&":"?")+V;return S(X,"",g,"GET",true,f)}};this.formToStr=function(Y){var X="",U="",W,T;for(var V=0;V<Y.length;V+=1){W=Y[V];if(W.name!=""){T=undefined;switch(W.type){case"select-one":if(W.selectedIndex>-1){T=W.options[W.selectedIndex].value}else{T=""}break;case"checkbox":case"radio":if(W.checked==true){T=W.value}break;default:T=W.value}if(T!=undefined){T=F.encode(T);X+=U+W.name+"="+T;U="&"}}}return X};function L(Y){var U=[];for(var X in Y){var V=Y[X];if(V.constructor==Array){for(var W=0,T=V.length;W<T;W++){U.push(X+"="+encodeURIComponent(V[W]))}}else{U.push(X+"="+encodeURIComponent(V))}}return U.join("&")}}function getOs(){if(navigator.userAgent.indexOf("MSIE")>0){return"MSIE"}if(isFirefox=navigator.userAgent.indexOf("Firefox")>0){return"Firefox"}if(isSafari=navigator.userAgent.indexOf("Safari")>0){return"Safari"}if(isCamino=navigator.userAgent.indexOf("Camino")>0){return"Camino"}if(isMozilla=navigator.userAgent.indexOf("Gecko/")>0){return"Gecko"}}function $(A){return document.getElementById(A)}var ajax=new AJAXRequest();