package org.apache.jsp.WEB_002dINF.content.app;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class app_002dauthority_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List _jspx_dependants;

  static {
    _jspx_dependants = new java.util.ArrayList(3);
    _jspx_dependants.add("/common/taglibs.jsp");
    _jspx_dependants.add("/common/global.jsp");
    _jspx_dependants.add("/WEB-INF/PowerDesk-tags.tld");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.AnnotationProcessor _jsp_annotationprocessor;

  public Object getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_annotationprocessor = (org.apache.AnnotationProcessor) getServletConfig().getServletContext().getAttribute(org.apache.AnnotationProcessor.class.getName());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.release();
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_005fset_005f0(_jspx_page_context))
        return;
      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n");
      out.write("<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n");
      out.write("<head>\r\n");
      out.write("\r\n");
      out.write("\t<meta http-equiv=\"Content-Type\" content=\"text/html\" />\r\n");
      out.write("\t<title>角色菜单权限管理</title>\r\n");
      out.write("\t");
      out.write("<script language=\"javascript\">\r\n");
      out.write("var _ctx = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("';\r\n");
      out.write("\r\n");
      out.write("function autoHeight(specialName){\r\n");
      out.write("\tvar endHeight = 0;\r\n");
      out.write("\ttry{\r\n");
      out.write("\t\tvar oheight = $(window.top.document).find(\"#bodyLoad\").height();\r\n");
      out.write("\t\tvar menuId = top.nowMenuId;\r\n");
      out.write("\t\tif(null!=menuId && undefined !=menuId){\r\n");
      out.write("\t\t\tvar ch = 0;\r\n");
      out.write("\t\t\ttry{\r\n");
      out.write("\t\t\t\tch=$(window.top.document).find('#' + menuId+'_frame').get(0).document.body.scrollHeight;\r\n");
      out.write("\t\t\t\tvar ch2= $(document).height();\r\n");
      out.write("\t\t\t\tif(ch2>ch || ch2==ch-51){ch=ch2;}\r\n");
      out.write("\t\t\t}catch(e){\r\n");
      out.write("\t\t\t\tch=$(window.top.document).find('#' + menuId+'_frame').get(0).contentDocument.body.scrollHeight;\r\n");
      out.write("\t\t\t\tvar ch2= $(document).height();\r\n");
      out.write("\t\t\t\tif(ch2>ch){ch=ch2;}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tif(endHeight == 0){\r\n");
      out.write("\t\t\t\tendHeight = ch;\r\n");
      out.write("\t\t\t}else if(ch > endHeight){\r\n");
      out.write("\t\t\t\tendHeight = ch;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\tif(endHeight>604){\r\n");
      out.write("\t\t\t\t$(window.top.document).find(\"#bodyLoad\").height(endHeight+51);\r\n");
      out.write("\t\t\t\t$(window.top.document).find(\"#div_left_b\").height(endHeight+51);\r\n");
      out.write("\t\t\t\t$(window.top.document).find('#' + menuId+'_frame').contents().find(\"body\").height(endHeight);\r\n");
      out.write("\t\t\t\t$(window.top.document).find('#' + menuId+'_frame').height(endHeight);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}catch(e){}\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function rePosition(obj){\r\n");
      out.write("\tobj.focus();\r\n");
      out.write("}\r\n");
      out.write("</script>");
      out.write("\r\n");
      out.write("\t\r\n");
      out.write("\t<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/jquery-easyui/themes/icon.css\"  />\r\n");
      out.write("\t<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/jquery-easyui/themes/default/easyui.css\" />\r\n");
      out.write("\t<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/loadMask/jquery.loadmask.css\"/>\r\n");
      out.write("\t<link   type=\"text/css\" rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/css/common/TreePanel.css\" />\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/js/common.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/common/TreePanel.js\"></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/jquery-easyui/jquery.easyui.min.js\" ></script>\r\n");
      out.write("\t<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/resources/js/loadMask/jquery.loadmask.min.js\"></script>\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<body class=\"easyui-layout\">\r\n");
      out.write("\t<!-- 左边 -->\r\n");
      out.write("\t<div class=\"easyui-panel\" region=\"west\" title=\"角色菜单 \" split=\"true\" style=\"width:250px\">\r\n");
      out.write("\t\t<div id=\"roleTreePanel\" style=\"min-height:400px\"/>\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<!-- 中间 -->\r\n");
      out.write("\t<div class=\"easyui-panel\" id=\"centerRegion\" region=\"center\" split=\"true\" style=\"width:300px;padding:5px;+position:relative;overflow-x:hidden\">\r\n");
      out.write("\t\t<div style=\"width:100%;line-height: 30px;height: 30px;\">\r\n");
      out.write("\t\t\t<div style=\"float:left;margin-left:5px;\">当前角色:</div>\r\n");
      out.write("\t\t\t<div id=\"sel_role_name\" style=\"float:left;background-color: orange;\"></div>\r\n");
      out.write("\t\t\t<a id=\"btnSaveCenterTree\" style=\"float:right;\" href=\"#\" class=\"easyui-linkbutton\" iconCls=\"icon-save\" onclick=\"saveRoleMenuRel()\">保存菜单授权</a>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"successTip\" style=\"margin-left:5px;color:red;\"></div>\r\n");
      out.write("\t\t<div id=\"menuTreePanel\" style=\"min-height:400px\"/>\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t<!-- 右边 -->\r\n");
      out.write("\t<div class=\"easyui-panel\" region=\"east\" split=\"true\" style=\"width:300px;\">\r\n");
      out.write("\t\t<div style=\"width:100%;line-height: 30px;height: 30px;\">\r\n");
      out.write("\t\t\t<div style=\"float:left;margin-left:5px;\">当前菜单:</div>\r\n");
      out.write("\t\t\t<div id=\"sel_menu_name\" style=\"float:left;background-color: orange;\"></div>\r\n");
      out.write("\t\t\t<a id=\"btnSaveRightTree\" style=\"float:right;\" href=\"#\" class=\"easyui-linkbutton\" iconCls=\"icon-save\" onclick=\"saveMenuRoleRel()\">保存角色授权</a>\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"successTipRight\" style=\"margin-left:5px;color:red;\"></div>\r\n");
      out.write("\t\t<div id=\"rightRolePanel\" style=\"min-height:400px\"/>\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("\t<div id=\"wSaveConfirm\" title=\"角色授权菜单变化如下:\" class=\"easyui-window\" closed=\"true\" style=\"width:350px;height:500px;padding:5px;background: #fafafa;\">\r\n");
      out.write("\t\t<div style=\"width: 100%;text-align: left;\">\r\n");
      out.write("\t\t\t<input type=\"button\" style=\"cursor:pointer\" class=\"buttom\" onclick=\"savePopConfirm()\" value=\"确定\" />\r\n");
      out.write("\t\t\t<input type=\"button\" style=\"cursor:pointer\" class=\"buttom\" onclick=\"closePopConfirm()\" value=\"取消\" />\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"confirmDetailDiv\">\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write(" \r\n");
      out.write("\t\r\n");
      out.write("\t<div id=\"wSaveConfirmRight\" title=\"菜单授权角色变化如下:\" class=\"easyui-window\" closed=\"true\" style=\"width:350px;height:500px;padding:5px;background: #fafafa;\">\r\n");
      out.write("\t\t<div style=\"width: 100%;text-align: left;\">\r\n");
      out.write("\t\t\t<input type=\"button\" style=\"cursor:pointer\" class=\"buttom\" onclick=\"savePopConfirmRight()\" value=\"确定\" />\r\n");
      out.write("\t\t\t<input type=\"button\" style=\"cursor:pointer\" class=\"buttom\" onclick=\"closePopConfirmRight()\" value=\"取消\" />\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t\t<div id=\"confirmDetailDivRight\">\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</div>\r\n");
      out.write("\t</div>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\r\n");
      out.write("//左边角色树\r\n");
      out.write("var gRoleTree;\r\n");
      out.write("var gSelRoleNode;\r\n");
      out.write("\r\n");
      out.write("//中间菜单树\r\n");
      out.write("var gMenuTree;\r\n");
      out.write("var gSelMenuNode;\r\n");
      out.write("var gRoleCd;\r\n");
      out.write("\r\n");
      out.write("//右边角色树\r\n");
      out.write("var gRightRoleTree;\r\n");
      out.write("\r\n");
      out.write("$(function(){ \r\n");
      out.write("\tdisableSaveBtn();\r\n");
      out.write("\tdisableRightSaveBtn();\r\n");
      out.write("\t\r\n");
      out.write("\tloadRoleTree();\r\n");
      out.write("});\r\n");
      out.write("\r\n");
      out.write("//加载角色树\r\n");
      out.write("function loadRoleTree(){\r\n");
      out.write("\tdisableSaveBtn();\r\n");
      out.write("\t$('#roleTreePanel').html('<div style=\"height:60px;\">&nbsp;</div>').mask('加载角色中,请稍候..');\r\n");
      out.write("\t$.post(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/app/app-authority!loadRoleTree.action\", function(result) {\r\n");
      out.write("\t\t$(\"#roleTreePanel\").html('').unmask();\r\n");
      out.write("\t\tif (result) {\r\n");
      out.write("\t\t\tgRoleTree = new TreePanel({\r\n");
      out.write("\t\t\t\trenderTo: \"roleTreePanel\",\r\n");
      out.write("\t\t\t\t'root'  : eval('('+result+')'),\r\n");
      out.write("\t\t\t\t'ctx'\t:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("'\r\n");
      out.write("\t\t\t}); \r\n");
      out.write("\t\t\t//自定义\r\n");
      out.write("\t\t\tgRoleTree.isDelegateIcon = true;\r\n");
      out.write("\t\t\tgRoleTree.delegateGetDelegateIcon = function(node){\r\n");
      out.write("\t\t\t\treturn node.iconPath;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\tgRoleTree.delegateOnMouseOverNode = function(node){\r\n");
      out.write("\t\t\t\treturn '';\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\t//修饰所有节点\r\n");
      out.write(" \t\t\tfor(var k in gRoleTree.nodeHash){\r\n");
      out.write(" \t\t\t\tvar node = gRoleTree.nodeHash[k];\r\n");
      out.write(" \t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write(" \t\t\t\tif( nodeType== \"0\"){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/webim/male_online.jpg\"; \r\n");
      out.write(" \t\t\t\t\t\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t\tif( nodeType== \"1\" && node.isLeaf()){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/imgTree/page.gif\";\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t}\r\n");
      out.write("\t\t\tgRoleTree.render();\r\n");
      out.write("\t\t\tgRoleTree.on(function(node){\r\n");
      out.write("\t\t\t\tvar id = node.attributes.entityId;\r\n");
      out.write("\t\t\t\tvar nodeCd = node.attributes.entityCd;\r\n");
      out.write("\t\t\t\tvar nodeName =  node.attributes.entityName;\r\n");
      out.write("\t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write("\t\t\t\t//根节点\r\n");
      out.write("\t\t\t\tif(nodeType == '9'){\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t//角色\r\n");
      out.write("\t\t\t\telse if( nodeType == \"0\"){\r\n");
      out.write("\t\t\t\t\tgSelRoleNode = node;\r\n");
      out.write("\t\t\t\t\tgRoleCd = nodeCd;\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t$('#sel_role_name').html(nodeName);\r\n");
      out.write("\t\t\t\t\t$('#sel_role_name').attr('roleCd',nodeCd);\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\tloadMenuTree(nodeCd);\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tdisableSaveBtn();\r\n");
      out.write("\t\t\t\t\tif(node.isExpand){\r\n");
      out.write("\t\t\t\t\t\tnode.collapse();\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tnode.expand();\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t});\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("//加载角色对应的菜单树\r\n");
      out.write("function loadMenuTree(roleCd){\r\n");
      out.write("\tdisableSaveBtn();\r\n");
      out.write("\tvar url = \"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/app/app-authority!loadModuleMenuTree.action\";\r\n");
      out.write("\t$('#menuTreePanel').html('<div style=\"height:60px;\">&nbsp;</div>').mask('加载模块/菜单中,请稍候..');\r\n");
      out.write("\t$.post(url,{roleCd: roleCd}, function(result) {\r\n");
      out.write("\t\t$(\"#menuTreePanel\").html('').unmask();\r\n");
      out.write("\t\tif (result) {\r\n");
      out.write("\t\t\tgMenuTree = new TreePanel({\r\n");
      out.write("\t\t\t\trenderTo: \"menuTreePanel\",\r\n");
      out.write("\t\t\t\t'root'  : eval('('+result+')'),\r\n");
      out.write("\t\t\t\t'ctx'\t:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("'\r\n");
      out.write("\t\t\t}); \r\n");
      out.write("\t\t\t//自定义\r\n");
      out.write("\t\t\tgMenuTree.isDelegateIcon = true;\r\n");
      out.write("\t\t\tgMenuTree.delegateGetDelegateIcon = function(node){\r\n");
      out.write("\t\t\t\treturn node.iconPath;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\tgMenuTree.delegateOnMouseOverNode = function(node){\r\n");
      out.write("\t\t\t\treturn '';\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\t//修饰所有节点\r\n");
      out.write(" \t\t\tfor(var k in gMenuTree.nodeHash){\r\n");
      out.write(" \t\t\t\tvar node = gMenuTree.nodeHash[k];\r\n");
      out.write(" \t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write(" \t\t\t\tif( nodeType== \"module\"){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/imgTree/folder.jpg\"; \r\n");
      out.write(" \t\t\t\t\t\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t\tif( nodeType== \"menu\" && node.isLeaf()){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/imgTree/page.gif\";\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t}\r\n");
      out.write("\t\t\tgMenuTree.render();\r\n");
      out.write("\t\t\tgMenuTree.on(function(node){\r\n");
      out.write("\t\t\t\tvar menuId   = node.attributes.entityId;\r\n");
      out.write("\t\t\t\tvar menuCd   = node.attributes.entityCd;\r\n");
      out.write("\t\t\t\tvar menuName = node.attributes.entityName;\r\n");
      out.write("\t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write("\t\t\t\t//菜单\r\n");
      out.write("\t\t\t\tif( nodeType == \"menu\"){\r\n");
      out.write("\t\t\t\t\t$('#sel_menu_name').attr('menuId',menuId);\r\n");
      out.write("\t\t\t\t\t$('#sel_menu_name').html(menuName);\r\n");
      out.write("\t\t\t\t\tgSelMenuNode = node;\r\n");
      out.write("\t\t\t\t\t//加载右边角色树\r\n");
      out.write("\t\t\t\t\tloadRightRoleTree(menuId)\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tif( $.trim(menuId) == '' || $.trim(menuId)=='0'){\r\n");
      out.write("\t\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\tif(node.isExpand){\r\n");
      out.write("\t\t\t\t\t\tnode.collapse();\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tnode.expand();\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t\tenableSaveBtn();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t});\r\n");
      out.write("\t\r\n");
      out.write("\t$('#centerTreePanel').unmask();\r\n");
      out.write("}\r\n");
      out.write("//设置生效保存按钮\r\n");
      out.write("function enableSaveBtn(){\r\n");
      out.write("\t$('#btnSaveCenterTree').linkbutton('enable');\r\n");
      out.write("}\r\n");
      out.write("//设置失效保存按钮\r\n");
      out.write("function disableSaveBtn(){\r\n");
      out.write("\t$('#btnSaveCenterTree').linkbutton('disable');\r\n");
      out.write("}\r\n");
      out.write("//保存角色->菜单配置\r\n");
      out.write("function saveRoleMenuRel(){\r\n");
      out.write("\tvar addDels    = gMenuTree.getAddDeleteIds('menu');//menu-菜单\r\n");
      out.write("\tvar addMenuIds = addDels[0];\r\n");
      out.write("\tvar delMenuIds = addDels[1];\r\n");
      out.write("\tif((addMenuIds == '') && (delMenuIds == '') ){\r\n");
      out.write("\t\talert(\"菜单无变化,请确认!\");\r\n");
      out.write("\t\treturn;\r\n");
      out.write("\t}\r\n");
      out.write("\t$(\"#confirmDetailDiv\").html(gMenuTree.getPopDiv('menu','授权菜单','收回菜单'));\r\n");
      out.write("\t$(\"#wSaveConfirm\").window('open');\r\n");
      out.write("}\r\n");
      out.write("//确认保存\r\n");
      out.write("function savePopConfirm(){\r\n");
      out.write("\tvar addDels    = gMenuTree.getAddDeleteIds('menu');//menu-菜单\r\n");
      out.write("\tvar addMenuIds = addDels[0];\r\n");
      out.write("\tvar delMenuIds = addDels[1];\r\n");
      out.write("\t\r\n");
      out.write("\tvar url = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/app/app-authority!saveRoleMenuBatch.action';\r\n");
      out.write("\t$.post(url,{roleCd: gRoleCd,addMenuIds: addMenuIds,delMenuIds: delMenuIds},function(result){\r\n");
      out.write("\t\tif(result=='success'){\r\n");
      out.write("\t\t\t//注意:必须重新加载菜单树,否则点击保存方法,仍可以保存.\r\n");
      out.write("\t\t\tloadMenuTree(gRoleCd);\r\n");
      out.write("\t\t\tclosePopConfirm();\r\n");
      out.write("\t\t\t$('#successTip').text('设置成功!').show().fadeOut(2000);\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\t$.messager.alert('提示','设置失败!<br/>'+result);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t});\r\n");
      out.write("}\r\n");
      out.write("//关闭\r\n");
      out.write("function closePopConfirm(){\r\n");
      out.write("\t$('#wSaveConfirm').window('close');\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("//---------右边--------\r\n");
      out.write("\r\n");
      out.write("function enableRightSaveBtn(){\r\n");
      out.write("\t$('#btnSaveRightTree').linkbutton('enable');\r\n");
      out.write("}\r\n");
      out.write("function disableRightSaveBtn(){\r\n");
      out.write("\t$('#btnSaveRightTree').linkbutton('disable');\r\n");
      out.write("}\r\n");
      out.write("function loadRightRoleTree(menuId){\r\n");
      out.write("\tdisableRightSaveBtn();\r\n");
      out.write("\t$('#rightRolePanel').html('<div style=\"height:60px;\">&nbsp;</div>').mask('加载已授权的角色中,请稍候..');\r\n");
      out.write("\t$.post(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/app/app-authority!loadRightRoleTree.action\", {menuId: menuId}, function(result) {\r\n");
      out.write("\t\t$(\"#rightRolePanel\").html('').unmask();\r\n");
      out.write("\t\tif (result) {\r\n");
      out.write("\t\t\tgRightRoleTree = new TreePanel({\r\n");
      out.write("\t\t\t\trenderTo: \"rightRolePanel\",\r\n");
      out.write("\t\t\t\t'root'  : eval('('+result+')'),\r\n");
      out.write("\t\t\t\t'ctx'\t:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("'\r\n");
      out.write("\t\t\t}); \r\n");
      out.write("\t\t\t//自定义\r\n");
      out.write("\t\t\tgRightRoleTree.isDelegateIcon = true;\r\n");
      out.write("\t\t\tgRightRoleTree.delegateGetDelegateIcon = function(node){\r\n");
      out.write("\t\t\t\treturn node.iconPath;\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\tgRightRoleTree.delegateOnMouseOverNode = function(node){\r\n");
      out.write("\t\t\t\treturn '';\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\t//修饰所有节点\r\n");
      out.write(" \t\t\tfor(var k in gRightRoleTree.nodeHash){\r\n");
      out.write(" \t\t\t\tvar node = gRightRoleTree.nodeHash[k];\r\n");
      out.write(" \t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write(" \t\t\t\tif( nodeType== \"0\"){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/webim/male_online.jpg\"; \r\n");
      out.write(" \t\t\t\t\t\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t\tif( nodeType== \"1\" && node.isLeaf()){\r\n");
      out.write(" \t\t\t\t\tnode.iconPath = _ctx + \"/images/imgTree/page.gif\";\r\n");
      out.write(" \t\t\t\t}\r\n");
      out.write(" \t\t\t}\r\n");
      out.write(" \t\t\tgRightRoleTree.render();\r\n");
      out.write("\t\t\tgRightRoleTree.on(function(node){\r\n");
      out.write("\t\t\t\tvar id = node.attributes.entityId;\r\n");
      out.write("\t\t\t\tvar nodeCd = node.attributes.entityCd;\r\n");
      out.write("\t\t\t\tvar nodeType = node.attributes.nodeType;\r\n");
      out.write("\t\t\t\t//根节点\r\n");
      out.write("\t\t\t\tif(nodeType == '9'){\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t} \r\n");
      out.write("\t\t\t\t//角色\r\n");
      out.write("\t\t\t\telse if( nodeType != \"0\"){\r\n");
      out.write("\t\t\t\t\tif(node.isExpand){\r\n");
      out.write("\t\t\t\t\t\tnode.collapse();\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tnode.expand();\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tenableRightSaveBtn();\r\n");
      out.write("\t});\r\n");
      out.write("}\r\n");
      out.write("//保存菜单->角色配置\r\n");
      out.write("function saveMenuRoleRel(){\r\n");
      out.write("\tvar addDels    = gRightRoleTree.getAddDeleteIds('0');//0-角色\r\n");
      out.write("\tvar addMenuIds = addDels[0];\r\n");
      out.write("\tvar delMenuIds = addDels[1];\r\n");
      out.write("\tif((addMenuIds == '') && (delMenuIds == '') ){\r\n");
      out.write("\t\talert(\"角色无变化,请确认!\");\r\n");
      out.write("\t\treturn;\r\n");
      out.write("\t}\r\n");
      out.write("\t$(\"#confirmDetailDivRight\").html(gRightRoleTree.getPopDiv('0','授权角色','收回角色'));\r\n");
      out.write("\t$(\"#wSaveConfirmRight\").window('open');\r\n");
      out.write("}\r\n");
      out.write("//确认保存\r\n");
      out.write("function savePopConfirmRight(){\r\n");
      out.write("\tvar addDels    = gRightRoleTree.getAddDeleteIds('0');//0-角色\r\n");
      out.write("\tvar addRoleIds = addDels[0];\r\n");
      out.write("\tvar delRoleIds = addDels[1];\r\n");
      out.write("\t\r\n");
      out.write("\tvar menuId = $('#sel_menu_name').attr('menuId');\r\n");
      out.write("\t\r\n");
      out.write("\tif( menuId && menuId != ''){\r\n");
      out.write("\t\tvar url = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ctx}", java.lang.String.class, (PageContext)_jspx_page_context, null, false));
      out.write("/app/app-authority!saveMenuRoleBatch.action';\r\n");
      out.write("\t\t$.post(url,{menuId: menuId,addRoleIds: addRoleIds, delRoleIds: delRoleIds},function(result){\r\n");
      out.write("\t\t\tif(result=='success'){\r\n");
      out.write("\t\t\t\t//注意:必须重新加载右边角色菜单树,否则点击保存方法,仍可以保存.\r\n");
      out.write("\t\t\t\tloadRightRoleTree(menuId);\r\n");
      out.write("\t\t\t\tclosePopConfirmRight();\r\n");
      out.write("\t\t\t\t$('#successTipRight').html('设置成功!').show().fadeOut(3000);\r\n");
      out.write("\t\t\t}else{\r\n");
      out.write("\t\t\t\t$.messager.alert('提示','设置失败!<br/>'+result);\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\talert('请选择菜单!');\r\n");
      out.write("\t}\r\n");
      out.write("}\r\n");
      out.write("//关闭\r\n");
      out.write("function closePopConfirmRight(){\r\n");
      out.write("\t$('#wSaveConfirmRight').window('close');\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_005fset_005f0(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_005fset_005f0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    _jspx_th_c_005fset_005f0.setPageContext(_jspx_page_context);
    _jspx_th_c_005fset_005f0.setParent(null);
    // /common/taglibs.jsp(8,0) name = var type = java.lang.String reqTime = false required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fset_005f0.setVar("ctx");
    // /common/taglibs.jsp(8,0) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
    _jspx_th_c_005fset_005f0.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.Object.class, (PageContext)_jspx_page_context, null, false));
    int _jspx_eval_c_005fset_005f0 = _jspx_th_c_005fset_005f0.doStartTag();
    if (_jspx_th_c_005fset_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
      return true;
    }
    _005fjspx_005ftagPool_005fc_005fset_0026_005fvar_005fvalue_005fnobody.reuse(_jspx_th_c_005fset_005f0);
    return false;
  }
}
